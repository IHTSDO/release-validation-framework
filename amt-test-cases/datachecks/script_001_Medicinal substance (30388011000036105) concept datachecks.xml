
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="script_001_Medicinal substance (30388011000036105) concept datachecks" verbose="2">


	
	<test name="01b Some DNF Medicinal substances exist">
        <parameter name="query" value="select count(*) from &lt;PROSPECTIVE&gt;.concept_active a join rf2_cr_transitiveclosuretable t on t.sourceid = a.id where t.destinationId = 30388011000036105 or (a.id = 30388011000036105 and t.destinationid = 30344011000036106);"/>
        <parameter name="description" value=""></parameter>
		<parameter name="qualifier" value=">"></parameter>
		<parameter name="expectedValue" value="1"/>
        <parameter name="skip" value="true"/>
        <parameter name="skip" value="true"/> <!--Will come back to expected value tests-->
        <classes>
            <class name="au.gov.nehta.test.ExpectedValueTest"/>
        </classes>
    </test>

<!-- Basic Content validation !-->
    <test name="02 All types of Medicinal substance are 900000000000074008|primitive">
        <parameter name="query" value="select * from &lt;PROSPECTIVE&gt;.concept_active
										where definitionStatusId != 900000000000074008
										and isKindOf_cr(id,30388011000036105);"/>
        <parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>

	<test name="03 All concepts with semantic tag (AU substance) are types of 30344011000036106|Australian substance (AU substance)">
        <parameter name="query" value="select * from &lt;PROSPECTIVE&gt;.description_active
										where isActiveConcept_cr(conceptId) AND typeId = 900000000000003001
										and SUBSTRING(term,-14,14) = '(AU substance)'
										and NOT isKindOf_cr(conceptId,30344011000036106);"/>
        <parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	
	<test name="04 All concepts that are types of 30388011000036105|medicinal substance have semantic tag (AU substance)">
        <parameter name="query" value="select * from &lt;PROSPECTIVE&gt;.description_active
										where isKindOf_cr(conceptId,30388011000036105)
										and typeId = 900000000000003001
										and SUBSTRING(term,-14,14) != '(AU substance)';"/>
        <parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>



	<test name="05b DNF Medicinal substance(30388011000036105) is the only child of 30344011000036106|Australian substance">
        <parameter name="query" value="select distinct id from &lt;PROSPECTIVE&gt;.concept_active
										where isChildOf_cr(id,30344011000036106)
										and id != 30388011000036105;"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
<!-- Defining/Source properties !-->


	<test name="06b DNF is modification of relationships(30394011000036104) relationships only have sourceId 30388011000036105|medicinal substance">
        <parameter name="query" value="select * from &lt;PROSPECTIVE&gt;.relationship_active
										where typeId = 30394011000036104
										and NOT isKindOf_cr(sourceId,30388011000036105);"/>
        <parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>



	<test name="07b DNF is modification of relationships(30394011000036104) only have destinationId 30388011000036105|medicinal substance">
        <parameter name="query" value="select * from &lt;PROSPECTIVE&gt;.relationship_active
										where typeId = 30394011000036104
										and NOT isKindOf_cr(destinationId,30388011000036105);"/>
        <parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>



	<test name="08b DNF Medicinal substances only have [30394011000036104|is modification of] OR [116680003|Is a] relationships">
        <parameter name="query" value="select * from &lt;PROSPECTIVE&gt;.relationship_active
										where isKindOf_cr(sourceId,30388011000036105)
										and typeId not in (30394011000036104,116680003);"/>
        <parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	

	
	<test name="09b DNF is modification of(30394011000036104) relationships have a maximum cardinality of 1">
        <parameter name="query" value="select * from &lt;PROSPECTIVE&gt;.relationship_active
										where typeId = 30394011000036104
										group by sourceId
										having count(destinationId) > 1;"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	


	<test name="10b DNF All Medicinal substance relationships are ungrouped (group = 0)">
        <parameter name="query" value="select * from &lt;PROSPECTIVE&gt;.relationship_active
										where isKindOf_cr(sourceId,30388011000036105)
										and relationshipgroup != 0;"/>
        <parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>



	<test name="14b DNF All Medicinal substances are disjoint (Medicinal substances aren't subtypes of other Medicinal substances)">
        <parameter name="query" value="select * from &lt;PROSPECTIVE&gt;.relationship_active
										where typeId = 116680003
										and isDescendentOf_cr(sourceId,30388011000036105)
										and isDescendentOf_cr(destinationid,30388011000036105);"/>
        <parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
</suite>
