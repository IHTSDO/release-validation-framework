<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="script_006_Composite Unit of Measure (700000041000036105) concept datachecks" verbose="2">



    <test name="01b DNF Some Composite Unit of Measure concepts exist">
        <parameter name="query" value="select count(*) from &lt;PROSPECTIVE&gt;.concept_active where id in (select sourceid from rf2_cr_transitiveclosuretable where destinationId = 700000041000036105 or sourceid = 700000041000036105);"/>
		<parameter name="qualifier" value=">"></parameter>
		<parameter name="expectedValue" value="1"/>
        <parameter name="skip" value="true"/>
        <parameter name="skip" value="true"/> <!--Will come back to expected value tests-->
        <classes>
            <class name="au.gov.nehta.test.ExpectedValueTest"/>
        </classes>
    </test>
	
<!-- Basic Content validation !-->
	 <test name="02 All Composite Unit of Measure concepts are 900000000000073002|Defined">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.concept_active
										WHERE     isKindOf_cr(id, 700000041000036105)
										AND definitionstatusid != 900000000000073002;"/>
		<parameter name="resultCount" value="0"/>
         <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	
	<test name="03 All Composite Unit of Measure FSNs have a semantic tag (AU qualifier)">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.description_active
										WHERE isActiveConcept_cr(conceptId) AND isKindOf_cr(conceptid, 700000041000036105)
										AND typeid = 900000000000003001
										AND term NOT REGEXP BINARY ' \\(AU qualifier\\)$';"/>
		<parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>

	<test name="04 Concept 700000041000036105|composite unit of measure has FSN = 'composite unit of measure (AU qualifier)'">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.description_active
										WHERE     typeId = 900000000000003001
										AND conceptId = 700000041000036105
										AND term != BINARY 'composite unit of measure (AU qualifier)';"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>

	<test name="05 Concept 700000041000036105|composite unit of measure has SYN = 'composite unit of measure'">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.description_active
										WHERE     typeId = 900000000000013009
										AND conceptId = 700000041000036105
										AND term != BINARY 'composite unit of measure';"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	


	<test name="06b DNF composite unit of measure(700000041000036105) is a child of 30428011000036107|unit of measure">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE sourceId = 700000041000036105
										AND typeId = 116680003
										AND destinationId = 30428011000036107
										AND id != 4476081000168120;"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>



	<test name="07b DNF composite unit of measure(700000041000036105) is only a child of 30428011000036107|unit of measure">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE sourceId = 700000041000036105
										AND typeId = 116680003
										AND destinationId != 30428011000036107;"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	
<!-- Defining/Source properties !-->


	<test name="08b DNF[16680003|Is a relationships] of Composite Unit of Measure descendents only have destinationIds that are types of 700000041000036105|composite unit of measure">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE isDescendentOf_cr(sourceid, 700000041000036105)
										AND typeid = 116680003
										AND NOT isKindOf_cr(destinationid, 700000041000036105);"/>
		<parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	


	<test name="09b DNF [700000071000036103|has denominator units] relationships only have destinationIds that are types of 30428011000036107|unit of measure (excluding types of Composite Unit of Measure)">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE typeid = 700000071000036103
										AND NOT isKindOf_cr(destinationid, 30428011000036107)
										AND NOT isKindOf_cr(destinationid, 700000041000036105);"/>
		<parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>



	<test name="10b DNF [700000071000036103|has denominator units] relationships only have sourceIds that are types of 700000041000036105|composite unit of measure">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE typeid = 700000071000036103
										AND NOT isKindOf_cr(sourceid, 700000041000036105);"/>
		<parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	


	<test name="11b DNF All Composite Unit of Measure concepts have exactly one [700000071000036103|has denominator units] relationship">
        <parameter name="query" value="SELECT sourceid, count(*)
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE typeId = 700000071000036103
										AND isKindOf_cr(sourceId, 700000041000036105)
										GROUP BY sourceid
										HAVING count(*) != 1;"/>
        <parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>


	
	<test name="12b DNF [700000091000036104|has numerator units] relationships only have destinationIds that are types of 30428011000036107|unit of measure (excluding types of Composite Unit of Measure)">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE typeid = 700000091000036104
										AND NOT isKindOf_cr(destinationid, 30428011000036107)
										AND NOT isKindOf_cr(destinationid, 700000041000036105);"/>
		<parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>



	<test name="13b DNF [700000091000036104|has numerator units] relationships only have sourceIds that are types of 700000041000036105|composite unit of measure">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE typeid = 700000091000036104
										AND NOT isKindOf_cr(sourceid, 700000041000036105);"/>
		<parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>



	<test name="14b DNF All Composite Unit of Measure concepts have exactly one [700000091000036104|has numerator units] relationship">
        <parameter name="query" value="SELECT sourceid, count(*)
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE typeId = 700000091000036104
										AND isKindOf_cr(sourceId, 700000041000036105)
										GROUP BY sourceid
										HAVING count(*) != 1;"/>
        <parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>



	<test name="15b DNF Composite Unit of Measure relationships are only 700000091000036104|has numerator units OR 700000071000036103|has denominator units OR 116680003|Is a relationships">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE isKindOf_cr(sourceid, 700000041000036105)
										AND NOT (typeid = 700000091000036104
										OR typeid = 700000071000036103
										OR typeid = 116680003);"/>
		<parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>




	<test name="16b DNF All Composite Unit of Measure relationships are ungrouped (group = 0)">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE isKindOf_cr(sourceid, 700000041000036105)
										AND relationshipgroup != 0;"/>
		<parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
</suite>
