<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="script_011_Mismatch and Subsumption.xml" verbose="2">



	

	<test name="02 Multipack TPPs don't subsume non-multipack TPPs">
        <parameter name="query" value="select distinct TPP_TPP.sourceId, TPP1_QTY.MPUUs,TPP_TPP.destinationId, TPP2_QTY.MPUUs 
                                        from (select destinationId,sourceId from &lt;PROSPECTIVE&gt;.relationship_active
                                                where typeId = 116680003
                                                and isActiveMemberOf_cr_refset(sourceId, 929360041000036105) and isActiveMemberOf_cr_refset(destinationId, 929360041000036105)
                                                ) AS TPP_TPP
                                        JOIN (select sourceId,count(*) MPUUs from &lt;PROSPECTIVE&gt;.relationship_active where typeId = 30409011000036107 group by sourceId) AS TPP1_QTY
                                        on TPP_TPP.sourceId = TPP1_QTY.sourceId
                                        JOIN (select sourceId,count(*) MPUUs from &lt;PROSPECTIVE&gt;.relationship_active where typeId = 30409011000036107 group by sourceId) AS TPP2_QTY
                                        on TPP_TPP.destinationId = TPP2_QTY.sourceId
                                        where TPP1_QTY.MPUUs &lt; TPP2_QTY.MPUUs;"/>
        <parameter name="description" value=""></parameter>
		<parameter name="resultCount" value="null"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>

	<test name="03 Multipack MPPs don't subsume non-multipack MPPs">
        <parameter name="query" value="select distinct MPP_MPP.sourceId, get_cr_ADRS_PT(MPP_MPP.sourceId),MPP1_QTY.MPUUs,MPP_MPP.destinationId, get_cr_ADRS_PT(MPP_MPP.destinationId),MPP2_QTY.MPUUs 
                                        from (select destinationId,sourceId from &lt;PROSPECTIVE&gt;.relationship_active
                                                where typeId = 116680003
                                                and isActiveMemberOf_cr_refset(sourceId, 929360081000036101) and isActiveMemberOf_cr_refset(destinationId, 929360081000036101)
                                                ) AS MPP_MPP
                                        JOIN (select sourceId,count(*) MPUUs from &lt;PROSPECTIVE&gt;.relationship_active where typeId = 30348011000036104 group by sourceId) AS MPP1_QTY
                                        on MPP_MPP.sourceId = MPP1_QTY.sourceId
                                        JOIN (select sourceId,count(*) MPUUs from &lt;PROSPECTIVE&gt;.relationship_active where typeId = 30348011000036104 group by sourceId) AS MPP2_QTY
                                        on MPP_MPP.destinationId = MPP2_QTY.sourceId
                                        where MPP1_QTY.MPUUs &lt; MPP2_QTY.MPUUs;"/>
        <parameter name="description" value=""></parameter>
		<parameter name="resultCount" value="null"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>

	<test name="04 TPPs have the same number of hasUU as their corresponding MPUU">
        <parameter name="query" value="select MPP_TPP.destinationId, MPUU_QTY.MPUUs,MPP_TPP.sourceId, TPUU_QTY.TPUUs from (select destinationId,sourceId from &lt;PROSPECTIVE&gt;.relationship_active
                                        where typeId = 116680003
                                        and isActiveMemberOf_cr_refset(sourceId, 929360041000036105) and isActiveMemberOf_cr_refset(destinationId, 929360081000036101)
                                                            ) AS MPP_TPP
                                        JOIN (select sourceId,count(*) TPUUs from &lt;PROSPECTIVE&gt;.relationship_active where typeId = 30409011000036107 group by sourceId) AS TPUU_QTY
                                        on MPP_TPP.sourceId = TPUU_QTY.sourceId
                                        JOIN (select sourceId,count(*) MPUUs from &lt;PROSPECTIVE&gt;.relationship_active where typeId = 30348011000036104 group by sourceId) AS MPUU_QTY
                                        on MPP_TPP.destinationId = MPUU_QTY.sourceId
                                        where MPUUs != TPUUs;"/>
        <parameter name="description" value=""></parameter>
		<parameter name="resultCount" value="null"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	
</suite>
