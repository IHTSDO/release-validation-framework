<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="script_004_Trade product (30560011000036108) concept datachecks" verbose="2">


	
    <test name="01b DNF Some Trade Products exist">
        <parameter name="query" value="select count(*) from &lt;PROSPECTIVE&gt;.concept_active where id in (select sourceid from rf2_cr_transitiveclosuretable where destinationId = 30560011000036108 or sourceid = 30560011000036108);"/>
		<parameter name="qualifier" value=">"></parameter>
		<parameter name="expectedValue" value="1"/>
        <parameter name="skip" value="true"/>
        <parameter name="skip" value="true"/> <!--Will come back to expected value tests-->
        <classes>
            <class name="au.gov.nehta.test.ExpectedValueTest"/>
        </classes>
    </test>
	
<!-- Basic Content validation !-->
	 <test name="02 All children of 30560011000036108|trade product (and itself) are 900000000000074008|primitive (Except 30425011000036101|TPUU)">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.concept_active
										WHERE     (isChildOf_cr(id, 30560011000036108)
										OR id = 30560011000036108)
										AND id != 30425011000036101
										AND definitionstatusid != 900000000000074008;"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>

	<test name="03 All FSNs with semantic tag (trade product) are children of 30560011000036108|trade product (or itself)">
        <parameter name="query" value="select * from &lt;PROSPECTIVE&gt;.description_active
										where isActiveConcept_cr(conceptId) AND typeId = 900000000000003001
										AND term REGEXP BINARY ' \\(trade product\\)$' 
										and NOT isChildOf_cr(conceptId,30560011000036108) and conceptId != 30560011000036108;"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	
	<test name="04 All children of 30560011000036108|trade product (and itself but not 30425011000036101|TPUU) FSNs have a semantic tag (trade product)">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.description_active
										WHERE  (isChildOf_cr(conceptid, 30560011000036108)
										OR conceptid = 30560011000036108)
										AND conceptid != 30425011000036101
										AND typeid = 900000000000003001
										AND term NOT REGEXP BINARY ' \\(trade product\\)$';"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>

	<test name="05 Concept 30560011000036108|trade product has FSN = 'trade product (trade product)'">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.description_active
										WHERE     typeId = 900000000000003001
										AND conceptId = 30560011000036108
										AND term != BINARY 'trade product (trade product)';"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>

	<test name="06 Concept 30560011000036108|trade product has SYN = 'trade product'">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.description_active
										WHERE     typeId = 900000000000013009
										AND conceptId = 30560011000036108
										AND term != BINARY 'trade product'
										AND term != BINARY 'TP - trade product';"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	


	<test name="07b DNF All Trade products are descendents of 30506011000036107|Australian product">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.concept_active
										WHERE isKindOf_cr(id, 30560011000036108)
										AND NOT isDescendentOf_cr(id, 30506011000036107);"/>
        <parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	


	<test name="08b DNF trade product(30560011000036108) is a child of 30506011000036107|Australian product">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE sourceId = 30560011000036108
										AND typeId = 116680003
										AND destinationId = 30506011000036107
										and id != 2304701000168129;"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	


		<test name="09b DNF Trade Product(30560011000036108) is only a child of 30506011000036107|Australian product">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE sourceId = 30560011000036108
										AND typeId = 116680003
										AND destinationId != 30506011000036107;"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	
<!-- Defining/Source properties !-->


		 <test name="10b DNF Children of 30560011000036108|trade product (and itself) only have 116680003|Is a relationships">
        <parameter name="query" value="SELECT * FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE isKindOf_cr(sourceid, 30560011000036108) and NOT isKindOf_cr(sourceid, 30425011000036101)
										AND typeid != 116680003;"/>
        <parameter name="resultCount" value="0"/>
             <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	

	
	 <test name="11b DNF Children of 30560011000036108|trade product (except 30425011000036101|TPUU) only have a destinationId of 30560011000036108|Trade product">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE isChildOf_cr(sourceid, 30560011000036108)
										AND sourceid != 30425011000036101
										AND destinationid != 30560011000036108;"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>



		<test name="12b DNF Children of 30560011000036108|trade product relationships are ungrouped (group = 0) (ex. TPUU)">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.relationship_active
										WHERE isChildOf_cr(sourceid, 30560011000036108)
										AND relationshipgroup != 0
										and sourceId != 30425011000036101;"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test>
	
<!-- Destination properties !-->



	<test name="13b DNF All children of Trade Product are the destination of at least one [700000101000036108|has TP] OR 116680003 [Is a] relationship">
        <parameter name="query" value="SELECT *
										FROM &lt;PROSPECTIVE&gt;.concept_active
										WHERE isChildOf_cr(Id, 30560011000036108)
										AND id NOT IN (SELECT destinationid
														FROM &lt;PROSPECTIVE&gt;.relationship_active
														WHERE typeId in (700000101000036108,116680003));"/>
        <parameter name="resultCount" value="0"/>
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test> 



	<test name="14b DNF All TPs are disjoint (TPs aren't subtypes of other TPs)">
        <parameter name="query" value="select * from &lt;PROSPECTIVE&gt;.relationship_active
										where (isDescendentOf_cr(sourceId, 30560011000036108) and not isKindOf_cr(sourceId, 30425011000036101))
										and (isDescendentOf_cr(destinationid, 30560011000036108) and not isKindOf_cr(destinationid, 30425011000036101));"/>
        <parameter name="resultCount" value="0"/>
        <parameter name="skip" value="true"/> <!--Uses a function or proc that needs refactoring-->
        <classes>
            <class name="au.gov.nehta.test.ResultCountTest"/>
        </classes>
    </test> 
</suite>
